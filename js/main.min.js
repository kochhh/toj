!function(){"use strict";class n{constructor(e){var{selector:e,targetDate:t}=e;this.selector=e,this.targetDate=t,this.refs={days:document.querySelector(this.selector+' [data-value="days"]'),hours:document.querySelector(this.selector+' [data-value="hours"]'),mins:document.querySelector(this.selector+' [data-value="minutes"]'),secs:document.querySelector(this.selector+' [data-value="seconds"]')},this.intervalId=null}getTimeRemaining(e){var e=Date.parse(e)-Date.parse(new Date),t=0<e?Math.floor(e/864e5):0,i=0<e?Math.floor(e/36e5%24):0,n=0<e?Math.floor(e/1e3/60%60):0,o=0<e?Math.floor(e/1e3%60):0;return e<=0&&this.stopTimer(),{total:e,days:t,hours:i,mins:n,secs:o}}getDaysEnding(e){var t=e%10;return 10<e&&[11,12,13,14].includes(e%100)?"дней":1==t?"день":[2,3,4].includes(t)?"дня":[5,6,7,8,9,0].includes(t)?"дней":void 0}updateTimer(e){var{days:e,hours:t,mins:i,secs:n}=e;this.refs.days.textContent=0<e?e+" "+this.getDaysEnding(e):"",this.refs.hours.textContent=t<10?"0"+t:t,this.refs.mins.textContent=i<10?"0"+i:i,this.refs.secs.textContent=n<10?"0"+n:n}startTimer(){var e=this.getTimeRemaining(this.targetDate);this.updateTimer(e),this.intervalId=setInterval(()=>{var e=this.getTimeRemaining(this.targetDate);this.updateTimer(e)},1e3)}stopTimer(){clearInterval(this.intervalId)}}const e={init(){window.addEventListener("resize",function(t){let i;function e(){const e=t.clientHeight;e!==i&&requestAnimationFrame(function(){t.style.setProperty("--vh",.01*e+"px"),i=e})}return e(),e}(document.documentElement)),(e=document.querySelector(".parallax"))&&new Parallax(e);var e=document.getElementById("modalCountdown");if(e){const t=new bootstrap.Modal(e),i=new n({selector:"#countdown",targetDate:new Date("March, 30 2023 12:00:00")});setTimeout(()=>{t.show(),i.startTimer()},1e4),e.addEventListener("hidden.bs.modal",()=>{i.stopTimer()})}}};function o(e,t){let n=1<arguments.length&&void 0!==t?t:500;const o=window.scrollY,s=e-o,r=performance.now();!function e(){const t=(performance.now()-r)/n;const i=c(t);window.scrollTo({top:o+i*s});t<.999&&window.requestAnimationFrame(e)}()}function c(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}const t={config:{breakpoint:window.matchMedia("(min-width: 744px)"),linksToSection:document.querySelectorAll("[data-scrollto]"),buttonScrollDown:document.querySelector(".btn-scroll"),fp:null,timer:null},initFp(){this.config.fp=new fullpage("#fullpage",{licenseKey:"73438E6B-32424808-B5E93D50-0E3A4BE3",menu:"#menu",scrollOverflow:!0,controlArrows:!1,scrollingSpeed:500,lazyLoading:!1,credits:{enabled:!1},beforeLeave:(e,t)=>{this.config.buttonScrollDown&&(this.config.buttonScrollDown.classList.toggle("btn-scroll--texty","whois"===t.anchor),this.config.buttonScrollDown.classList.toggle("btn-scroll--start","hero"===t.anchor),this.config.buttonScrollDown.classList.toggle("btn-light","whois"!==t.anchor),this.config.buttonScrollDown.classList.toggle("invisible","contacts"===t.anchor))}}),this.config.fp.setAllowScrolling(!1,"left, right"),this.config.fp.setKeyboardScrolling(!1,"left, right")},scrollByHash(){var e;window.location.hash&&(e=window.location.hash.substring(1),o((document.querySelector("[data-anchor="+e+"]")||document.querySelector('[data-anchor="hero"')).getBoundingClientRect().top+window.scrollY))},breakpointCheck(){this.config.breakpoint.matches?null===this.config.fp&&this.initFp():null!==this.config.fp&&(this.config.fp.destroy("all"),this.config.fp=null)},init(){this.breakpointCheck(),this.config.breakpoint.matches||this.scrollByHash(),window.addEventListener("resize",()=>{clearTimeout(this.config.timer),this.config.timer=setTimeout(()=>{this.breakpointCheck()},100)}),this.config.buttonScrollDown&&this.config.buttonScrollDown.addEventListener("click",()=>{this.config.fp.moveSectionDown()}),Array.prototype.slice.call(this.config.linksToSection).forEach(e=>{e.addEventListener("click",e=>{var e=e.target.getAttribute("data-scrollto")||"hero",t=document.querySelector(".section--"+e).getBoundingClientRect().top+window.scrollY;null!==this.config.fp?this.config.fp.moveTo(e):o(t)})})}},i={config:{body:document.body,nav:document.querySelector("#navigation"),navLinks:document.querySelectorAll("#menu .nav-link"),mql:window.matchMedia("(min-width: 744px)")},navHide(){new bootstrap.Collapse(this.config.nav,{hide:!0})},init(){this.config.nav&&(Array.prototype.slice.call(this.config.navLinks).forEach(e=>{e.addEventListener("click",e=>{e=e.target.closest(".nav-item").getAttribute("data-menuanchor")||"hero",e=document.querySelector(".section--"+e).getBoundingClientRect().top+window.scrollY;this.config.mql.matches||(this.navHide(),o(e))})}),this.config.body.addEventListener("keyup",e=>{this.config.nav.classList.contains("show")&&"Escape"===e.key&&this.navHide()}),this.config.nav.addEventListener("show.bs.collapse",()=>{this.config.nav.classList.add("show"),this.config.body.classList.add("overflow-hidden")}),this.config.nav.addEventListener("hide.bs.collapse",()=>{this.config.body.classList.remove("overflow-hidden")}))}},s=window.Quiz={config:{body:document.body,screenQuiz:document.querySelector(".quizz-container--quiz"),screenResult:document.querySelector(".quizz-container--result"),sectionSliderEl:document.querySelector(".section--quiz .section-slider"),sectionSlider:null,quizSliderEl:document.querySelector(".quizz-slider"),quizSlider:null,quizButton:document.querySelector(".btn-quiz"),elements:document.querySelectorAll('.quizz-vars-item input[type="radio"]'),progress:document.querySelector(".quizz-progress .progress"),bar:document.querySelector(".quizz-progress .bar"),offsetProperty:"--offset",animatedClass:"animated",hiddenClass:"hidden",processClass:"page-quiz-process"},setOffset(e,t,i){t=323*Math.PI*((100-100*t/i)/100);e.style.setProperty(this.config.offsetProperty,t+"px")},init(){const t=this.config.quizSliderEl.querySelectorAll(".quizz-item").length;let i=!1;this.initQuizSlider();const n=this.config.quizSliderEl.swiper;this.config.body.classList.add(this.config.processClass),Array.prototype.slice.call(this.config.elements).forEach(e=>{e.addEventListener("click",e=>{i&&e.preventDefault()}),e.addEventListener("change",e=>{i||n.destroyed?e.preventDefault():(this.config.quizSliderEl.classList.add("disabled"),i=!0,n.activeIndex+1<t?setTimeout(()=>{this.config.quizSliderEl.classList.remove("disabled"),this.config.progress&&this.setOffset(this.config.bar,n.activeIndex+1,t),n.slideNext(),i=!1},350):(this.config.body.classList.remove(this.config.processClass),this.config.progress&&(this.config.progress.classList.add(this.config.animatedClass),this.setOffset(this.config.bar,n.activeIndex+1,t)),this.config.quizSliderEl.classList.add(this.config.hiddenClass),(e=document.createElement("div")).className="quizz-waiter",e.textContent="Секунду, мы считаем твой результат! Пока можешь немного позаниматься творожной аэробикой.",this.config.quizSliderEl.parentNode.appendChild(e),setTimeout(()=>{document.querySelector(".quizz-waiter").classList.add("show")},350),setTimeout(()=>{var e=this.config.sectionSliderEl.swiper,e=(this.config.quizSliderEl.classList.remove("disabled"),e.slideNext(),i=!1,document.querySelector(".section--quiz").getBoundingClientRect().top+window.scrollY);o(e)},4e3)))})})},initSectionSlider(){this.config.sectionSlider=new Swiper(this.config.sectionSliderEl,{allowTouchMove:!1,autoHeight:!0}),this.config.quizButton&&this.config.quizButton.addEventListener("click",()=>{var e=document.querySelector(".section--quiz").getBoundingClientRect().top+window.scrollY,t=this.config.sectionSliderEl.swiper;o(e),t.slideNext(),this.init()})},initQuizSlider(){this.config.quizSlider=new Swiper(this.config.quizSliderEl,{allowTouchMove:!1,autoHeight:!0,pagination:{el:".quizz-pages",type:"fraction"}})}},r={config:{screenStart:document.querySelector(".wheel-container--start"),screenResult:document.querySelector(".wheel-container--result"),button:document.querySelector(".btn-rotate"),buttonAgain:document.querySelector(".btn-rotate-again"),drum:document.querySelector(".wheel-drum"),isRunning:!1,startOffset:0},rotate(){e=1,t=8,e=Math.ceil(e),t=Math.floor(t);var e,t=3600+(45*(Math.floor(Math.random()*(t-e+1))+e-1)+22.5);this.config.isRunning||(this.config.isRunning=!0,gsap.fromTo(this.config.drum,{rotate:this.config.startOffset},{rotate:t,duration:10,ease:"power2.inOut"}),this.config.startOffset=t%360,setTimeout(()=>{this.config.isRunning=!1,this.config.startOffset=0,this.toggleScreens(this.config.screenStart,this.config.screenResult,!0),o(document.querySelector(".section--wheel").getBoundingClientRect().top+window.scrollY)},1e4))},toggleScreens(e,t,i){var n;e.classList.add("hidden"),i&&((n=document.createElement("div")).className="spinner",e.closest(".section").appendChild(n)),setTimeout(()=>{e.classList.add("d-none"),t.classList.remove("d-none"),setTimeout(()=>{t.classList.remove("hidden"),i&&document.querySelector(".spinner").remove()},400)},400)},init(){this.config.button&&this.config.button.addEventListener("click",()=>{o(document.querySelector(".wheel-image").getBoundingClientRect().top+window.scrollY-140),this.rotate(),this.config.button.disabled=!0}),this.config.buttonAgain&&this.config.buttonAgain.addEventListener("click",()=>{this.toggleScreens(this.config.screenResult,this.config.screenStart),this.config.button.parentNode.classList.add("d-none"),setTimeout(()=>{o(document.querySelector(".wheel-image").getBoundingClientRect().top+window.scrollY-140),this.rotate()},800)})}};document.addEventListener("DOMContentLoaded",function(){e.init(),t.init(),i.init(),s.initSectionSlider(),window.Quiz=s,r.init()})}();